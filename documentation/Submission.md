# Submission
In order to comply with [funder](Funder.md) and institutional access [policies](Policy.md), [Users](User.md) may be required to submit their [Publications](Publication.md) to one or more [Repositories](Repository.md). A Submission is associated with one `submitter` and one Publication. It encapsulates a User satisfying one or more Policies relevant to their Publication by either (1) [Deposits](Deposit.md) initiated in PASS or (2) [Copies](RepositoryCopy.md) of the publication that already exist in the target repositories. The User can start a Submission by describing their Publication and attaching relevant [Grants](Grant.md) to it. The PASS system will use this information to determine which policies apply, and will help the User send the Publication out to the Repositories that will fulfill them.   

Note that the source of a Submission record is not always a PASS User. In some instance, Submissions are created as a result of an import process designed to ensure that the User can see data relevant to their compliance with Policies in a uniform way.

| Field  		| Type  		| Description |
| ------------- | ------------- | ------------- |
| __id*__ | URI | Unique Submission URI (autogenerated) |
| metadata | String | Stringified JSON representation of metadata captured by the relevant repository forms. This will hold extended metadata relevant to the repositories selected in the Submission workflow. It may include fields such as embargoEndDate, embargoText, pmid, and anything else required by specific repositories etc. |
| source* | Enum ([_see list below_](#source-options)) | Indicates whether the record came from outside of PASS as an import, or was created through the system |
| submitted* | boolean | When true, this value signals that the Submission will no longer be edited by the User. It indicates to Deposit services that it can generate Deposits for any Repositories that need one. This becomes "true" when the User clicks "submit" in the UI. For Submissions generated by loader processes this value will be false when the User must complete the Submission, or true if it is merely pointing to an existing copy of the Publication in a Repository. |
| submittedDate | DateTime | Date the record was submitted by the [User](User.md) through PASS |
| submissionStatus* | Enum ([_see list below_](#submission-status-options)) | The current status of the Submission, derived from the [Deposit](Deposit.md) status(es), [RepositoryCopy](RepositoryCopy.md) status(es) and the `eventType` of the most recent [SubmissionEvent](SubmissionEvent.md) |
| publication* | URI | URI of Publication represented in this Submission |
| repositories* | List[URI] | A list of URIs for the Repositories that this Publication will exist in when the Submission is completed |
| submitter*  | URI | URI of the User responsible for submitting the Submission. The User will be the individual who either (a) created this Submission through PASS, thus claiming responsibility; (b) was designated as `submitter` by a `preparer`; or, (c) has been assigned the role based on their being PI of an associated Grant. Note that if a preparer designates a `submitter` that does not yet have a [User](User.md) record in the system, this field will store their name and email address in an encoded URI format e.g. `mailto:John%20Doe%3Cjohndoe%40example.org%3E` |
| preparers | List[URI] | A list of URIs for the User(s) who prepared, or who could contribute to the preparation of, the Submission. Preparers can edit the content of the Submission (describe the [Publication](Publication.md), add [Grants](Grant.md), select [Repositories](Repository.md)) but cannot approve Repository agreements, or submit the publication - these tasks must be performed by the `submitter`. |
| grants | List[URI] | List of URIs [Grants](Grant.md) that are associated with the User and are relevant to the Publication being submitted | 

*required 

*Properties automatically generated by the system are documented in [System Properties](SystemProperties.md). These are not available to client tools by default.*

## Submission status options

Below are the possible values for the `Submission.submissionStatus` field. They are listed in the order they would typically occur, with an indication of the arrangement of the data that will result in this status, and a label for whether it is a "terminal" status (i.e. there will be no further changes to the `submissionStatus`) or "intermediate" status. Note that not all Submissions will go through every status. 

| Value  					| Description | Data determining status | Terminal or intermediate|
| ------------------------ | ------------- |----------------------|----------------------|
| manuscript-required | When the PASS system identifies a need for a User to submit a Publication to a particular Repository, it will create a new Submission record with this status in order to prompt the User to provide the document and complete the Submission. For example, PASS imports information from the NIH Public Access Compliance system, which contains information about out of compliance publications - these will appear in the PASS system for PI of the corresponding Grant with the label `manuscript-required`. | New Submissions of this type are created with this status already set | intermediate |
| approval-requested | A Submission was prepared by a `preparer` but now needs the `submitter` to approve and submit it or provide feedback. | `Submission.submitted=false` and the most recent SubmissionEvent has `eventType=approval-requested`. | intermediate |
| changes-requested | A Submission was prepared by a `preparer`, but on review by the `submitter`, a change was requested. The Submission has been handed back to the `preparer` for editing. | `Submission.submitted=false` and the most recent SubmissionEvent has `eventType=changes-requested`. | intermediate |
| cancelled | A Submission was prepared and then cancelled by the `submitter` or `preparer` without being submitted. No further edits can be made to the Submission. | `Submission.submitted=false` and the most recent SubmissionEvent has `eventType=cancelled`. | terminal |
| submitted | The submit button has been pressed through the UI, but the Deposits have not yet been processed by the Deposit service. From this status forward, the Submission becomes read-only to both the `submitter` and `preparers`. | `Submission.submitted=true`, the most recent SubmissionEvent has `eventType=submitted` and there are not yet any Deposit records. | intermediate |
| in-progress | The Submission is being processed by the Deposit services. | One or more [Deposits](Deposit.md) records for the Submission exist, and at least one has not reached a status of "accepted" or "rejected" | intermediate |
| failed | The material has not yet been transferred to all repositories - a retry is likely pending. | One or more [Deposits](Deposit.md) for the Submission has a status of `failed`.  | intermediate |
| accepted | Material was successfully transferred to each Repository without error, but PASS has not yet recieved feedback on the status of every copy in the target Repositories. | All related [Deposits](Deposit.md) for the Submission have `depositStatus=accepted`. There are either no associated RepositoryCopies or there is a RepositoryCopy but it has `repoCopyStatus` of `accepted` or `in-progress`. | intermediate |
| mixed-status | There are multiple Deposits and RepositoryCopies, but these are at different stages making a single combined status impossible to calculate. In the UI, this status will invite the user to "See Details"| Data will vary, for example: a Submission with 2 Deposits - one with an associated RepositoryCopy whose `repoCopyStatus=complete` and another with no RepositoryCopy and `depositStatus=accepted`.
| complete | The target repositories have all received a copy of the Submission, and have indicated that the Submission was successful. | There is a RepositoryCopy with `repoCopyStatus=complete` for each of the target repositories. | terminal |
| rejected | The target repositories have all received a copy of the Submission, but upon inspection all of them rejected it. | All [Deposits](Deposit.md) for the Submission have `submissionStatus=rejected`. If only one of two are rejected, this would be set to `mixed-status`. | terminal |

## Source options

These are the possible sources of a Submission

| Value  		| Description |
| ------------- | ------------- |
| pass | Submission record was created or submitted via the PASS user interface  |
| other | Submission record was automatically created by harvesting and ingesting from a 3rd party service e.g. NIHMS |
